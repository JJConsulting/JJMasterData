$(function(){bootstrapVersion=$.fn.tooltip.Constructor.VERSION.charAt(0),jjloadform("load",null)});class JJDataExp{static setLoadMessage(){var t=document.getElementById("impSpin");new Spinner({lines:13,length:38,width:17,radius:45,scale:.2,corners:1,color:"#000",opacity:.3,rotate:0,direction:1,speed:1.2,trail:62,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"}).spin(t)}static checkProcess(t,e){showWaitOnPost=!1;var a=$("form").attr("action");a.includes("?")?a+="&t=tableexp":a+="?t=tableexp",a+="&gridName="+t,fetch(a+="&exptype=checkProcess").then(t=>t.json()).then(function(a){if(a.FinishedMessage){clearInterval(e),showWaitOnPost=!0,$("#export_modal_"+t+" .modal-body").html(a.FinishedMessage),$("#dataexp_spinner_"+t).hide();var o=$("#export_link_"+t)[0];o&&o.click()}else $("#divMsgProcess").css("display",""),$(".progress-bar").css("width",a.PercentProcess+"%").text(a.PercentProcess+"%"),$("#lblStartDate").text(a.StartDate),$("#lblResumeLog").text(a.Message)})}static startProcess(t){JJDataExp.setLoadMessage();let e=setInterval(function(){JJDataExp.checkProcess(t,e)},3e3)}static stopProcess(t,e){$("#divMsgProcess").html(e),showWaitOnPost=!1;var a=$("form").attr("action");a.includes("?")?a+="&t=tableexp":a+="?t=tableexp",a+="&gridName="+t,fetch(a+="&exptype=stopProcess")}static openExportUI(t){var e=$("form"),a=e.attr("action");a.includes("?")?a+="&t=tableexp":a+="?t=tableexp",a+="&gridName="+t,a+="&exptype=showoptions",$.ajax({async:!0,type:e.attr("method"),url:a,success:function(e){var a="#export_modal_"+t+" .modal-body ";$(a).html(e),jjloadform(null,a);var o=$("#"+t+"_totrows");if(o.length>0&&+o.text().replace(".","").replace(".","").replace(".","").replace(".","")>5e4&&$("#warning_exp_"+t).show(),bootstrapVersion<5)$("#export_modal_"+t).modal();else{let s=new bootstrap.Modal("#export_modal_"+t,{});s.show()}},error:function(t,e,a){console.log(a),console.log(e),console.log(t)}})}static doExport(t){var e=$("form"),a=e.attr("action");a.includes("?")?a+="&t=tableexp":a+="?t=tableexp",a+="&gridName="+t,a+="&exptype=export",$.ajax({async:!0,type:e.attr("method"),url:a,data:e.serialize(),success:function(e){var a="#export_modal_"+t+" .modal-body ";$(a).html(e),jjloadform(null,a)},error:function(t,e,a){console.log(a),console.log(e),console.log(t)}})}}class JJDataImp{static setLoadMessage(){let t=document.getElementById("impSpin");new Spinner({lines:13,length:38,width:17,radius:45,scale:.2,corners:1,color:"#000",opacity:.3,rotate:0,direction:1,speed:1.2,trail:62,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"}).spin(t)}static checkProcess(t){showWaitOnPost=!1;let e=$("form"),a=e.attr("action");a.includes("?")?a+="&t=ajaxdataimp&current_uploadaction=process_check&objname="+t:a+="?t=ajaxdataimp&current_uploadaction=process_check&objname="+t,$.ajax({url:a,dataType:"json",cache:!1,success:function(t){$("#divMsgProcess").css("display",""),$(".progress-bar").css("width",t.PercentProcess+"%").text(t.PercentProcess+"%"),$("#lblResumeLog").text(t.Message),$("#lblStartDate").text(t.StartDate),t.Insert>0&&($("#lblInsert").css("display",""),$("#lblInsertCount").text(t.Insert)),t.Update>0&&($("#lblUpdate").css("display",""),$("#lblUpdateCount").text(t.Update)),t.Delete>0&&($("#lblDelete").css("display",""),$("#lblDeleteCount").text(t.Delete)),t.Ignore>0&&($("#lblIgnore").css("display",""),$("#lblIgnoreCount").text(t.Ignore)),t.Error>0&&($("#lblError").css("display",""),$("#lblErrorCount").text(t.Error)),t.IsProcessing||($("#current_uploadaction").val("process_finished"),$("form:first").submit())}})}static startProcess(t){this.setLoadMessage(),setInterval(function(){JJDataImp.checkProcess(t)},3e3)}static stopProcess(t,e){$("#divMsgProcess").html(e),showWaitOnPost=!1;let a=$("form"),o=a.attr("action");o.includes("?")?o+="&t=ajaxdataimp&current_uploadaction=process_stop&objname="+t:o+="?t=ajaxdataimp&current_uploadaction=process_stop&objname="+t,$.ajax({url:o,dataType:"json",cache:!1})}}var _a,_b,jjdictionary={deleteAction:function(t,e,a){!0==confirm(a)&&$.ajax({type:"POST",url:e,success:function(e){e.success&&$("#"+t).remove()},error:function(t,e,a){if(messageWait.hide(),""!=t.responseText){var o=JSON.parse(t.responseText);messageBox.show("JJMasterData",o.message,4)}else console.log(t)}})},doActionSortable:function(t,e,a){$("#sortable_"+t).sortable({update:function(){var o=$(this).sortable("toArray");$.ajax({type:"POST",url:e,data:{orderFields:o,context:t},success:function(t){t.success||messageBox.show("JJMasterData",a,4)},error:function(t,e,o){if(messageWait.hide(),""!=t.responseText){var s=JSON.parse(t.responseText);401==s.status?document.forms[0].submit():messageBox.show("JJMasterData",s.message,4)}else messageBox.show("JJMasterData",a,4)}})}}).disableSelection()},setDisableAction:function(t,e,a){$.ajax({type:"POST",url:e,data:{value:t},success:function(t){t.success||messageBox.show("JJMasterData",a,4)},error:function(t,e,o){if(messageWait.hide(),""!=t.responseText){var s=JSON.parse(t.responseText);401==s.status?document.forms[0].submit():messageBox.show("JJMasterData",s.message,4)}else messageBox.show("JJMasterData",a,4)}})},refreshAction:function(t=!1){messageWait.show(),t?(window.parent.popup.hide(),window.parent.document.forms[0].submit()):(popup.hide(),document.forms[0].submit())},postAction:function(t){messageWait.show(),$("form:first").attr("action",t).submit()},exportElement:function(t,e,a){if(""==$("#selectedrows_"+t).val())return messageBox.show("JJMasterData",a,3),!1;var o=$("form:first"),s=$("form:first").attr("action");return o.attr("action",e),o.submit(),setTimeout(function(){o.attr("action",s),messageWait.hide()},2e3),!0}};function jjloadform(t,e){null==e&&(e=""),$(e+".selectpicker").selectpicker("render"),$(e+"input[type=checkbox][data-toggle^=toggle]").bootstrapToggle(),$(e+".jjform-datetime").flatpickr({enableTime:!1,wrap:!0,allowInput:!0,altInput:!1,dateFormat:"pt"===localeCode?"d/m/Y H:i":"m/d/Y H:i",onOpen:function(t,e,a){a.setDate(Date.now())},locale:localeCode}),$(e+".jjform-date").flatpickr({enableTime:!1,wrap:!0,allowInput:!0,altInput:!1,dateFormat:"pt"===localeCode?"d/m/Y":"m/d/Y",onOpen:function(t,e,a){a.setDate(Date.now())},locale:localeCode}),$(e+".jjform-hour").flatpickr({enableTime:!0,wrap:!0,allowInput:!0,altInput:!1,noCalendar:!0,dateFormat:"H:i",onOpen:function(t,e,a){a.setDate(Date.now())},locale:localeCode}),$(e+".jjdecimal").each(function(){let t=$(this).attr("jjdecimalplaces");null==t&&(t="2"),"pt"===localeCode?$(this).number(!0,t,",","."):$(this).number(!0,t)}),$(e+"[data-toggle='tooltip'], "+e+"[data-bs-toggle='tooltip']").tooltip({container:"body",trigger:"hover"}),JJTextArea.setup(),JJSearchBox.setup(),JJLookup.setup(),JJSortable.setup(),JJUpload.setup(),JJSlider.observeSliders(),JJSlider.observeInputs(),messageWait.hide(),$(document).on({ajaxSend:function(t,e,a){if(null!=a.url&&-1!==a.url.indexOf("t=jjsearchbox"))return null;showWaitOnPost&&messageWait.show()},ajaxStop:function(){messageWait.hide()}}),$("form").on("submit",function(){showWaitOnPost&&setTimeout(function(){messageWait.show()},1)})}class JJLookup{static setup(){$("input.jjlookup").each(function(){let t=$(this),e=t.attr("id"),a=t.attr("pnlname"),o=t.attr("popuptitle"),s=+t.attr("popupsize"),i=$("form"),r=i.attr("action");r.includes("?")?r+="&":r+="?",r+="jjlookup_",r+=a+"="+e,$("#btn_"+e).on("click",function(){let e=r+"&lkaction=geturl&lkid="+t.val();return $.ajax({type:"POST",data:i.serialize(),dataType:"json",cache:!1,url:e,success:function(t){popup.show(o,t.url,s)},error:function(t,e,a){console.log(a),console.log(e),console.log(t)}}),!1}),t.on("focus",function(){t.val($("#id_"+e).val()).removeAttr("readonly").select()}),t.on("change",function(){$("#id_"+e).val(t.val())}),t.on("blur",function(){if(showWaitOnPost=!1,$("#id_"+e).val(t.val()),$("#st_"+e).removeClass("fa-check").removeClass("fa-exclamation-triangle").removeClass("fa-ellipsis-h").removeClass("fa-times"),t.removeAttr("readonly"),""==t.val())return;t.addClass("loading-circle");let a=r+"&lkaction=ajax&lkid="+t.val();$.ajax({type:"POST",data:i.serialize(),dataType:"json",cache:!1,url:a,success:function(a){showWaitOnPost=!0,t.removeClass("loading-circle"),""==a.description?($("#st_"+e).removeClass("fa fa-check").addClass("fa fa-exclamation-triangle"),t.removeAttr("readonly")):($("#st_"+e).removeClass("fa fa-exclamation-triangle").removeClass("fa fa-ellipsis-h").addClass("fa fa-check"),t.attr("readonly","readonly").val(a.description))},error:function(a,o,s){showWaitOnPost=!0,t.removeClass("loading-circle"),$("#st_"+e).removeClass("fa fa-check").addClass("fa fa-times"),console.log(s),console.log(o),console.log(a)}})})})}}class JJSearchBox{static setup(){$("input.jjsearchbox").each(function(){var t=$(this).attr("jjid"),e=$(this).attr("pnlname"),a=$(this).attr("triggerlength"),o=$(this).attr("numberofitems"),s=Boolean($(this).attr("scrollbar")),i=Boolean($(this).attr("showimagelegend"));null==a&&(a="1"),null==o&&(o="10"),null==s&&(s=!1),null==i&&(i=!1);var r=$("form"),n=r.attr("action");n.includes("?")?n+="&":n+="?",n+="t=jjsearchbox",n+="&objname="+t,n+="&pnlname="+e,$(this).blur(function(){""==$(this).val()&&($("#st_"+t).removeClass("fa-check").removeClass("fa-exclamation-triangle"),$("#"+t).val(""))}),$(this).typeahead({ajax:{url:n,method:"POST",loadingClass:"loading-circle",triggerLength:a,preDispatch:function(){return $("#"+t).val(""),$("#st_"+t).removeClass("fa-check").removeClass("fa-exclamation-triangle "),r.serializeArray()}},onSelect:function(e){$("#"+t).val(e.value),""!=e.value&&$("#st_"+t).removeClass("fa-search").removeClass("fa-exclamation-triangle ").addClass("fa fa-check")},displayField:"name",valueField:"id",triggerLength:a,items:o,scrollBar:s,item:'<li class="dropdown-item"><a href="#"></a></li>',highlighter:function(t){var e,a=this.query.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&");if(i){var o=t.split("|");e=o[0].replace(RegExp("("+a+")","ig"),function(t,e){return"<strong>"+e+"</strong>"}),e="<i class='fa fa-lg fa-fw "+o[1]+"' style='color:"+o[2]+";margin-right:6px;'></i>"+e}else e=t.replace(RegExp("("+a+")","ig"),function(t,e){return"<strong>"+e+"</strong>"});return e}})})}}class JJSlider{static observeSliders(){Array.from(document.getElementsByClassName("jjslider")).forEach(t=>{let e=document.getElementById(t.id+"-value");document.getElementById(t.id).addEventListener("change",function(){this.setAttribute("value",this.value)}),t.oninput=function(){e.value=this.value}})}static observeInputs(){Array.from(document.getElementsByClassName("jjslider-value")).forEach(t=>{let e=document.getElementById(t.id.replace("-value",""));t.oninput=function(){e.value=this.value}})}}class JJSortable{static setup(){$(".jjsortable").sortable({helper:function(t,e){var a=e.children(),o=e.clone();return o.children().each(function(t){$(this).width(a.eq(t).width())}),o},change:function(t,e){e.placeholder.css({visibility:"visible",background:"#fbfbfb"})}})}}class JJTextArea{static setup(){$("textarea").keydown(function(){var t=$(this),e=t.attr("maxlength"),a=t.attr("strvalid2"),o=t.attr("strchars");if(isNaN(e)&&(e=t.attr("jjmaxlength")),!isNaN(e)&&(isNaN(a)&&(a="Maximum limit of {0} characters!"),isNaN(o)&&(o="({0} characters remaining)"),!isNaN(e))){var s=t.attr("id");t.val().toString().length>e&&alert(a.replace("{0}",e)),o=o.replace("{0}",e-t.val().toString().length),o+="&nbsp;",$("#spansize_"+s).length?$("#spansize_"+s).html(o):$("<span id='spansize_"+s+"' class='small' style='float: right'>"+o+"</span>").insertBefore(t)}})}}class JJUpload{static setup(){$("div.fileUpload").each(function(){let t=$(this),e=t.attr("id"),a="true"===t.attr("jjmultiple"),o="true"===t.attr("autoSubmit"),s=t.attr("maxFileSize"),i=t.attr("dragDrop"),r=t.attr("copyPaste"),n=t.attr("showFileSize"),l=t.attr("allowedTypes"),c="<span>&nbsp;<b>"+t.attr("dragDropStr")+"</b></span>",d="*";"*"!=l&&(d="."+l.replace(" ","").replace(",",",."));let u=$("form"),p=u.attr("action");p.includes("?")?p+="&t=jjupload":p+="?t=jjupload",p+="&objname="+e,$("#"+e).uploadFile({url:p,formData:u.serializeArray(),fileName:"file",multiple:a,maxFileSize:s,maxFileCount:1e3,dragDrop:i,showFileSize:n,dragdropWidth:$(this).width()-10,statusBarWidth:$(this).width()-10,autoSubmit:!0,uploadButtonClass:"btn btn-default",allowedTypes:l,acceptFiles:d,uploadStr:t.attr("uploadStr"),dragDropStr:c,doneStr:t.attr("doneStr"),cancelStr:t.attr("cancelStr"),abortStr:t.attr("abortStr"),extErrorStr:t.attr("extErrorStr"),sizeErrorStr:t.attr("sizeErrorStr"),customErrorKeyStr:"jquery-upload-file-error",returnType:"json",onSubmit:function(){showWaitOnPost=!1},onSuccess:function(t,e,a,o){var s=e["jquery-upload-file-message"];if(s&&""!=s){var i=$("<div class='ajax-file-upload-filename'></div>");$("<span class='fa fa-check-circle text-success'></span>").appendTo(i),$("<span>&nbsp;"+s+"</span>").appendTo(i),i.appendTo(o.statusbar[0])}},afterUploadAll:function(t){o&&t.selectedFiles>0&&($("#uploadaction_"+e).val("afteruploadall"),$("form:first").submit())}}),$(window).resize(function(){$("#"+e+" .ajax-upload-dragdrop").width($("#"+e).width()-30+"px")}),"true"==r&&window.addEventListener("paste",t=>{var a=t.clipboardData.files;if(1==a.length){var o=a[0];if(-1!=o.type.indexOf("image")){$("#btnDoUpload_"+e).click(function(){$("#preview_modal_"+e).modal("hide");var t=$("#preview_filename_"+e).val();""==t.trim()&&(t="image"),t+=".png";let a=new DataTransfer,s=new File([o],t,{type:o.type});a.items.add(s),$("#"+e+" input[type='file']")[0].files=a.files,$("#"+e+" input[type='file']").trigger("change")});var s=new FileReader;s.onload=function(t){document.getElementById("pastedimage_"+e).src=t.target.result.toString();var a=o.name.replace(/\.[^/.]+$/,"");$("#preview_filename_"+e).val(a),$("#preview_modal_"+e).modal()},s.readAsDataURL(o);return}}$()[0].files=a,$("#"+e+" input[type='file']").trigger("change")})})}}var jjview=function(){function t(t,e,a){if(e){let o=$("form"),s=o.attr("action");s.includes("?")?s+="&t=ajax":s+="?t=ajax",s+="&objname="+t,$.ajax({async:!0,type:o.attr("method"),url:s,data:o.serialize(),success:function(e){if("<!--ErrorPage-->"==e.substring(2,18)){$("form:first").submit();return}$("#jjgridview_"+t).html(e),a&&jjloadform(),$("#current_filteraction_"+t).val("")},error:function(e,a,o){console.log(o),console.log(a),console.log(e),$("#current_filteraction_"+t).val("")}})}else $("form:first").submit()}return{showExportOptions:function(t,e){"1"==e?($("#"+t+"_div_export_orientation").hide(),$("#"+t+"_div_export_all").show(),$("#"+t+"_div_export_delimiter").hide(),$("#"+t+"_div_export_fistline").show()):"2"==e?($("#"+t+"_div_export_orientation").show(),$("#"+t+"_div_export_all").hide(),$("#"+t+"_div_export_delimiter").hide(),$("#"+t+"_div_export_fistline").hide()):($("#"+t+"_div_export_orientation").hide(),$("#"+t+"_div_export_all").show(),$("#"+t+"_div_export_delimiter").show(),$("#"+t+"_div_export_fistline").show())},doClearFilter:function(e,a){var o="#gridfilter_"+e;$(o+" input:enabled, "+o+" select:enabled").each(function(){let t=$(this);t.hasClass("flatpickr-input")&&t.val("");let e=this.type;"checkbox"==e?t.prop("checked",!1):"input"!=e&&"tagsinput"==t.attr("data-role")?t.tagsinput("removeAll"):"hidden"!=e&&(t.val(""),t.hasClass("selectpicker")?t.selectpicker("render"):t.hasClass("jjsearchbox")?t.blur():t.hasClass("jjlookup")&&t.blur())}),$("#current_filteraction_"+e).val("CLEARACTION"),$("#current_tableaction_"+e).val(""),$("#current_formaction_"+e).val(""),t(e,a,!1)},doFilter:function(e,a){return $("#current_filteraction_"+e).val("FILTERACTION"),$("#current_tableaction_"+e).val(""),$("#current_tablepage_"+e).val("1"),$("#current_formaction_"+e).val(""),t(e,a,!1),!1},doSearch:function(t,e){var a=$(e).val().toString().toLowerCase();$("#table_"+t+" tr").filter(function(){var t=$(this).clone().find(".bootstrap-select, .selectpicker, select").remove().end().text().toLowerCase().indexOf(a)>-1;if(!t){var e=a.replace(",","").replace(".","").replace("-","");$(this).find("input").each(function(){var t=$(this).val();if(null!=t&&t.toString().replace(",","").replace(".","").replace("-","").toLowerCase().indexOf(e)>-1)return!1})}t||$(this).find("select").each(function(){var a=$(this).children("option:selected").text();if(null!=a&&(t=a.toLowerCase().indexOf(e)>-1))return!1}),$(this).toggle(t)}),a.length>0?($("#infotext_"+t).css("display","none"),$("ul.pagination").css("display","none")):($("#infotext_"+t).css("display",""),$("ul.pagination").css("display",""))},doSelectItem:function(t,e){var a=$("#selectedrows_"+t).val().toString(),o=[];if("jjchk_all"!=e.attr("id")){a.length>0&&(o=a.split(",")),e.prop("checked")?0>$.inArray(e.val(),o)&&o.push(e.val()):o=o.filter(function(t){return t!==e.val()}),$("#selectedrows_"+t).val(o);var s="",i=$("#selectedtext_"+t);s=0==o.length?i.attr("noSelStr"):1==o.length?i.attr("oneSelStr"):i.attr("paramSelStr").replace("{0}",o.length.toString()),i.text(s)}},doUnSelectAll:function(t){$(".jjselect input").not(":disabled").prop("checked",!1),$("#selectedrows_"+t).val("");var e=$("#selectedtext_"+t);e.text(e.attr("noSelStr"))},doSelectAll:function(t){var e=$("form"),a=e.attr("action");a.includes("?")?a+="&t=selectall":a+="?t=selectall",$.ajax({async:!0,type:e.attr("method"),url:a,success:function(e){var a=e.split(",");$(".jjselect input").not(":disabled").prop("checked",!0),$("#selectedrows_"+t).val(a);var o=$("#selectedtext_"+t),s=o.attr("paramSelStr").replace("{0}",a.length.toString());o.text(s)},error:function(t,e,a){console.log(a),console.log(e),console.log(t)}})},doSorting:function(e,a,o){var s="#current_tableorder_"+e;o+" ASC"==$(s).val()?$(s).val(o+" DESC"):$(s).val(o+" ASC"),$("#current_tableaction_"+e).val(""),$("#current_formaction_"+e).val(""),t(e,a,!0)},doMultSorting:function(t){for(var e="",a=$("#sortable_"+t).sortable("toArray"),o=0;o<a.length;o++){var s=$("#"+a[o]+"_order").children("option:selected").val();switch(s){case"A":e+=a[o]+" ASC,";break;case"D":e+=a[o]+" DESC,"}}e=e.substring(0,e.length-1),$("#current_tableorder_"+t).val(e),$("#sort_modal_"+t).modal("hide"),$("#current_formaction_"+t).val(""),jjview.doRefresh(t,!0)},doPaging:function(e,a,o){$("#current_tablepage_"+e).val(o),$("#current_tableaction_"+e).val(""),$("#current_formaction_"+e).val(""),t(e,a,!0)},doRefresh:function(e,a){$("#current_tableaction_"+e).val(""),$("#current_tablerow_"+e).val(""),$("#current_formaction_"+e).val(""),t(e,a,!0)},doConfigUI:function(t,e){$("#current_tableaction_"+t).val(e),$("#current_tablepage_"+t).val("1"),$("#current_tablerow_"+t).val(""),$("#current_formaction_"+t).val(""),$("form:first").submit()},doConfigCancel:function(t){$("form").trigger("reset"),$("form :checkbox").change(),$("#config_modal_"+t).modal("hide")},doSelElementInsert:function(t,e){$("#current_painelaction_"+t).val("ELEMENTSEL"),$("#current_selaction_"+t).val(e),$("form:first").submit()},formAction:function(t,e,a){if(a&&!confirm(a))return!1;$("#current_tableaction_"+t).val(""),$("#current_formaction_"+t).val(e),$("form:first").submit()},gridAction:function(t,e,a){if(a&&!confirm(a))return!1;$("#current_tableaction_"+t).val(e),$("#current_formaction_"+t).val(""),$("form:first").submit()},doPainelAction:function(t,e){return $("#current_painelaction_"+t).val(e),$("form").submit(),!1},doFormUrlRedirect:function(t,e,a){if(a&&!confirm(a))return!1;var o=$("form"),s=o.attr("action");s.includes("?")?s+="&t=geturlaction&objname="+t:s+="?t=geturlaction&objname="+t,$.ajax({async:!0,type:"POST",url:s,data:o.serialize()+"&criptid="+e,success:function(t){t.UrlAsPopUp?popup.show(t.TitlePopUp,t.UrlRedirect):window.location.href=t.UrlRedirect},error:function(t,e,a){console.log(a),console.log(e),console.log(t)}})},doSqlCommand:function(t,e,a){if(a&&!confirm(a))return!1;$("#current_tableaction_"+t).val(""),$("#current_formaction_"+t).val(""),$("#current_tablerow_"+t).val(e),$("form:first").submit()},showInsertSucess:function(t){$("#pnl_insertmsg_"+t).fadeOut(2e3,function(){$("#pnl_insert_"+t).slideDown()})},doUrlRedirect:function(t,e,a,o,s=1){if(o){let i=confirm(o);if(!i)return!1}e?popup.show(a,t,s):window.location.href=t},setLookup:function(t,e){window.parent.popup.hide(),setTimeout(function(){window.parent.$("#id_"+t).val(e),window.parent.$("#"+t).val(e).change().blur()},100)},deleteFile:function(t,e,a){let o=confirm(a);if(!o)return!1;$("#uploadaction_"+t).val("DELFILE"),$("#filename_"+t).val(e),$("form:first").submit()},downloadFile:function(t,e){$("#uploadaction_"+t).val("DOWNLOADFILE"),$("#filename_"+t).val(e),$("form:first").submit(),setTimeout(function(){messageWait.hide(),$("#uploadaction_"+t).val("")},1500)},renameFile:function(t,e,a){var o=prompt(a,e);null!=o&&o!=e&&($("#uploadaction_"+t).val("RENAMEFILE"),$("#filename_"+t).val(e+";"+o),$("form:first").submit())},openUploadForm:function(t,e,a){let o=$("#v_"+t).attr("pnlname"),s=$("form").attr("action");s+=s.includes("?")?"&":"?",s+="jjuploadform_"+o+"="+t,s+="&uploadvalues="+a,popup.show(e,s)},directDownload:function(t,e,a){messageWait.show();var o=$("form").attr("action");o+=o.includes("?")?"&":"?",o+="jjuploadform_"+e+"="+t,o+="&downloadfile="+a,window.location.assign(o),setTimeout(function(){messageWait.hide()},1500)},viewLog:function(t,e){$("#viewid_"+t).val(e),$("form:first").submit()},loadFrameLog:function(t,e){$("#sortable_grid a").removeClass("active"),""!=e&&$("#"+e).addClass("active"),$("#viewid_"+t).val(e);let a=$("form"),o=a.attr("action");o.includes("?")?o+="&t=ajax":o+="?t=ajax",$.post(o,a.serialize(),function(t){$("#jjpainellog_loghistory").html(t)})}}}(),messageBox=function(){let t={NONE:1,INFO:2,WARNING:3,ERROR:4,QUESTION:5},e={SMALL:1,DEFAULT:2,LARGE:3};var a="#site-modal",o="#site-modal-btn1",s="#site-modal-btn2",i=a.substring(1),r=o.substring(1);function n(t){$("#site-modal-title").html(t)}function l(t){$("#site-modal-content").html(t)}function c(t,e){$(o).text(t),$.isFunction(e)&&$(o).on("click.siteModalClick1",e),$(o).show()}return{show:function(d,u,p,m,f,h,v,g){var b,x,w,y,j;(n(""),l(""),$(o).text(""),$(o).off("click.siteModalClick1"),$(s).text(""),$(s).off("click.siteModalClick2"),b=p,x=m,$(a).length&&$(a).remove(),w="",w+='<div id="site-modal" tabindex="-1" class="modal fade" role="dialog">\r\n',w+='  <div class="modal-dialog',x==e.LARGE?w+=" modal-lg":x==e.SMALL&&(w+=" modal-sm"),w+='" role="document">\r\n',w+='    <div class="modal-content">\r\n',w+='      <div class="modal-header">\r\n',bootstrapVersion>=4?w+='        <h4 id="site-modal-title" class="modal-title"></h4>\r\n':bootstrapVersion>=5?w+='        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\r\n':3==bootstrapVersion&&(w+='        <h4 id="site-modal-title" class="modal-title"><button type="button" class="close" data-dismiss="modal">&times;</button></h4>\r\n'),w+="      </div>\r\n",w+='      <div class="modal-body">\r\n',w+='        <table border="0">\r\n',w+="          <tr>\r\n",w+='            <td style="width:40px">\r\n',b==t.ERROR?(w+='              <span class="text-danger">\r\n',w+='                <span class="fa fa-times-circle" aria-hidden="true" style="font-size: 30px;"></span>\r\n',w+="              </span>\r\n"):b==t.WARNING?(w+='              <span class="text-warning">\r\n',w+='                <span class="fa fa-exclamation-triangle " aria-hidden="true" style="font-size: 30px;"></span>\r\n',w+="              </span>\r\n"):b==t.INFO?(w+='              <span class="text-info">\r\n',w+='                <span class="fa fa-info-circle" aria-hidden="true" style="font-size: 30px;"></span>\r\n',w+="              </span>\r\n"):b==t.QUESTION&&(w+='              <span class="text-info">\r\n',w+='                <span class="fa fa-question-circle" aria-hidden="true" style="font-size: 30px;"></span>\r\n',w+="              </span>\r\n"),w+="            </td>\r\n",w+="            <td>\r\n",w+='              <span id="site-modal-content"></span>\r\n',w+="            </td>\r\n",w+="          </tr>\r\n",w+="        </table>\r\n",w+="      </div>\r\n",w+='      <div class="modal-footer">\r\n',3==bootstrapVersion?(w+='        <button type="button" id="site-modal-btn1" class="btn btn-default" data-dismiss="modal"></button>\r\n',w+='        <button type="button" id="site-modal-btn2" class="btn btn-default" data-dismiss="modal"></button>\r\n'):4==bootstrapVersion?(w+='        <button type="button" id="site-modal-btn1" class="btn btn-outline-dark" data-dismiss="modal"></button>\r\n',w+='        <button type="button" id="site-modal-btn2" class="btn btn-outline-dark" data-dismiss="modal"></button>\r\n'):(w+='        <button type="button" id="site-modal-btn1" class="btn btn-outline-dark" data-bs-dismiss="modal"></button>\r\n',w+='        <button type="button" id="site-modal-btn2" class="btn btn-outline-dark" data-bs-dismiss="modal"></button>\r\n'),w+="      </div>\r\n",w+="    </div>\r\n",w+="  </div>\r\n",w+="</div>\r\n",$("body").append(w),n(d),l(u),void 0===f?c("Fechar",null):c(f,h),void 0===v)?$(s).hide():(y=v,j=g,$(s).text(y),$.isFunction(j)&&$(s).on("click.siteModalClick2",j),$(s).show()),!function t(){if(bootstrapVersion<5)$(a).modal().on("shown.bs.modal",function(){$(o).focus()});else{let e=new bootstrap.Modal(document.getElementById(i),{});e.show(),e.addEventListener("shown.bs.modal",function(){document.getElementById(r).focus()})}}()},hide:function(){$(a).modal("hide"),$(".modal-backdrop").hide()}}}(),messageWait=function(){var t="#jjform_wait_message";return{show:function(){!function e(){if(!$(t).length){var a="";a+='<div id="jjform_wait_message">\r\n',a+='    <div class="ajaxImage"></div>\r\n',a+='    <div class="ajaxMessage">Aguarde...</div>\r\n',$(a+="</div>").insertAfter($("body"));var o=new Spinner({lines:17,length:28,width:14,radius:38,scale:.4,corners:1,color:"#000",opacity:.3,rotate:0,direction:1,speed:1.2,trail:62,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"}).spin();$(o.el).insertAfter($("#jjform_wait_message .ajaxImage"))}}(),$(t).css("display","")},hide:function(){$(t).css("display","none")}}}();class Popup{constructor(){this.modalId="popup-modal",this.modalTitleId="popup-modal-title"}setTitle(t){document.getElementById(this.modalTitleId).innerHTML=t}showModal(){if(bootstrapVersion<5)$("#"+this.modalId).modal();else{let t=new bootstrap.Modal(document.getElementById(this.modalId),{});t.show()}messageWait.show(),$("iframe").on("load",function(){messageWait.hide()})}loadHtml(t,e){$("#"+this.modalId).length&&$("#"+this.modalId).remove();let a,o;void 0===e&&(e="1"),e=parseInt(e);let s;switch(e){case 1:a="98%",o="92%",s='<div class="modal-dialog" style="margin:0.7em;left:0px;right:0px;top:0px;bottom:0px; position:fixed;width:auto;">\r\n';break;case 2:a="auto",o="95%",s='<div class="modal-dialog" style="position: auto; height: 95vh;width:auto;">\r\n';break;case 3:a="50%",o="65%",s='<div class="modal-dialog" style="position: auto; height: 65vh;width:50%">\r\n';break;default:a="65%",o="80%",s='<div class="modal-dialog" style="position: auto; height: 80vh;width:65%">\r\n'}let i=`
@media (min-width: 576px) {
  .modal-dialog { max-width: none; }
}

.modal-dialog {
  width: ${a};
  height: ${o};
  padding: 0;
}

.modal-content {
  height: 100%;
}
`,r="";r+='<div id="popup-modal" tabindex="-1" class="modal fade" role="dialog">\r\n',3==bootstrapVersion?r+=s:($("head").append(`<style type="text/css">${i}</style>`),r+='<div class="modal-dialog">'),3!=bootstrapVersion?r+=`    <div class="modal-content">\r
`:r+=`    <div class="modal-content" style="height:100%;width:auto;">\r
`,r+='      <div class="modal-header">\r\n',3==bootstrapVersion?(r+='        <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n',r+='        <h4 id="popup-modal-title" class="modal-title"></h4>\r\n'):(r+='        <h4 id="popup-modal-title" class="modal-title"></h4>\r\n',bootstrapVersion>=5?r+='        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>\r\n':r+='        <button type="button" class="close" data-dismiss="modal">&times;</button>\r\n'),r+="      </div>\r\n",r+='      <div class="modal-body"  style="height:90%;width:auto;">\r\n',r+='         <iframe style="border: 0px;" ',r+=" src='",r+=t,r+="' width='100%' height='97%'>Waiting...</iframe>",r+="      </div>\r\n",r+="    </div>\r\n",r+="  </div>\r\n",$(r+="</div>\r\n").appendTo($("body"))}show(t,e,a=0){this.loadHtml(e,a),this.setTitle(t),this.showModal()}hide(){$("#"+this.modalId).modal("hide")}modal(){return $("#"+this.modalId)}}var popup=function(){if(!(this instanceof Popup))return new Popup}(),jjutil={justNumber:function(t){var e="";let a;return null!=t.which?a=t.which:null!=t.keyCode&&(a=t.keyCode),8==a||0==a||(99==a||97==a||118==a||120==a||67==a||88==a||86==a||65==a)&&(!0===t.ctrlKey||!0===t.metaKey)||(e=String.fromCharCode(a),-1!="0123456789".indexOf(e)&&void 0)},justDecimal:function(t){var e="";let a;return null!=t.which?a=t.which:null!=t.keyCode&&(a=t.keyCode),8==a||0==a||(99==a||120==a||118==a||97==a||67==a||88==a||86==a||65==a)&&(!0===t.ctrlKey||!0===t.metaKey)||(e=String.fromCharCode(a),-1!="-0123456789.,".indexOf(e)&&void 0)},gotoNextFocus:function(t){var e=$("#"+t),a=e.parents("form:eq(0)").find("input,a.btn,select,button[type=submit]").filter(":visible"),o=a.eq(a.index(e)+1);if(o.length){if(o.is(":disabled"))for(let s=2;s<1e3&&!(!(o=a.eq(a.index(e)+s)).is(":disabled")&&o.is(":visible"));s++);o.focus(),o.select()}},replaceEntertoTab:function(t){$("#"+t+" input").on("keypress",function(t){if(13==t.keyCode)return jjutil.gotoNextFocus($(this).attr("id")),!1})}},showWaitOnPost=!0,bootstrapVersion=3;const locale=null!==(_a=document.documentElement.lang)&&void 0!==_a?_a:"pt-BR",localeCode=null!==(_b=locale.split("-")[0])&&void 0!==_b?_b:"pt";